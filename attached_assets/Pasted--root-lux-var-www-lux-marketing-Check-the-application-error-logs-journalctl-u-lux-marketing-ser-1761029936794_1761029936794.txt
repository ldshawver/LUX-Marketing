
root@lux:/var/www/lux-marketing# # Check the application error logs
journalctl -u lux-marketing.service -n 50 --no-pager

# Also check the last few lines
tail -n 30 /var/log/lux-marketing/error.log
Oct 21 06:56:29 lux gunicorn[2218]:                     ^^^^^^^
Oct 21 06:56:29 lux gunicorn[2218]: NameError: name 'request' is not defined
Oct 21 06:56:29 lux gunicorn[2218]: During handling of the above exception, another exception occurred:
Oct 21 06:56:29 lux gunicorn[2218]: Traceback (most recent call last):
Oct 21 06:56:29 lux gunicorn[2218]:   File "/var/www/lux-marketing/venv/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
Oct 21 06:56:29 lux gunicorn[2218]:     response = self.full_dispatch_request()
Oct 21 06:56:29 lux gunicorn[2218]:                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Oct 21 06:56:29 lux gunicorn[2218]:   File "/var/www/lux-marketing/venv/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
Oct 21 06:56:29 lux gunicorn[2218]:     rv = self.handle_user_exception(e)
Oct 21 06:56:29 lux gunicorn[2218]:          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Oct 21 06:56:29 lux gunicorn[2218]:   File "/var/www/lux-marketing/venv/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
Oct 21 06:56:29 lux gunicorn[2218]:     rv = self.dispatch_request()
Oct 21 06:56:29 lux gunicorn[2218]:          ^^^^^^^^^^^^^^^^^^^^^^^
Oct 21 06:56:29 lux gunicorn[2218]:   File "/var/www/lux-marketing/venv/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
Oct 21 06:56:29 lux gunicorn[2218]:     return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
Oct 21 06:56:29 lux gunicorn[2218]:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Oct 21 06:56:29 lux gunicorn[2218]:   File "/var/www/lux-marketing/venv/lib/python3.11/site-packages/flask_login/utils.py", line 290, in decorated_view
Oct 21 06:56:29 lux gunicorn[2218]:     return current_app.ensure_sync(func)(*args, **kwargs)
Oct 21 06:56:29 lux gunicorn[2218]:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Oct 21 06:56:29 lux gunicorn[2218]:   File "/var/www/lux-marketing/routes.py", line 112, in lux_generate_subjects
Oct 21 06:56:29 lux gunicorn[2218]:     logger.error(f"Error in LUX subject generation: {e}")
Oct 21 06:56:29 lux gunicorn[2218]:     ^^^^^^
Oct 21 06:56:29 lux gunicorn[2218]: NameError: name 'logger' is not defined
Oct 21 06:57:41 lux gunicorn[2219]: ERROR:app:Exception on /lux-agent/generate-campaign [POST]
Oct 21 06:57:41 lux gunicorn[2219]: Traceback (most recent call last):
Oct 21 06:57:41 lux gunicorn[2219]:   File "/var/www/lux-marketing/routes.py", line 55, in lux_generate_campaign
Oct 21 06:57:41 lux gunicorn[2219]:     objective = request.form.get('objective', '')
Oct 21 06:57:41 lux gunicorn[2219]:                 ^^^^^^^
Oct 21 06:57:41 lux gunicorn[2219]: NameError: name 'request' is not defined
Oct 21 06:57:41 lux gunicorn[2219]: During handling of the above exception, another exception occurred:
Oct 21 06:57:41 lux gunicorn[2219]: Traceback (most recent call last):
Oct 21 06:57:41 lux gunicorn[2219]:   File "/var/www/lux-marketing/venv/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
Oct 21 06:57:41 lux gunicorn[2219]:     response = self.full_dispatch_request()
Oct 21 06:57:41 lux gunicorn[2219]:                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Oct 21 06:57:41 lux gunicorn[2219]:   File "/var/www/lux-marketing/venv/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
Oct 21 06:57:41 lux gunicorn[2219]:     rv = self.handle_user_exception(e)
Oct 21 06:57:41 lux gunicorn[2219]:          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Oct 21 06:57:41 lux gunicorn[2219]:   File "/var/www/lux-marketing/venv/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
Oct 21 06:57:41 lux gunicorn[2219]:     rv = self.dispatch_request()
Oct 21 06:57:41 lux gunicorn[2219]:          ^^^^^^^^^^^^^^^^^^^^^^^
Oct 21 06:57:41 lux gunicorn[2219]:   File "/var/www/lux-marketing/venv/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
Oct 21 06:57:41 lux gunicorn[2219]:     return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
Oct 21 06:57:41 lux gunicorn[2219]:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Oct 21 06:57:41 lux gunicorn[2219]:   File "/var/www/lux-marketing/venv/lib/python3.11/site-packages/flask_login/utils.py", line 290, in decorated_view
Oct 21 06:57:41 lux gunicorn[2219]:     return current_app.ensure_sync(func)(*args, **kwargs)
Oct 21 06:57:41 lux gunicorn[2219]:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Oct 21 06:57:41 lux gunicorn[2219]:   File "/var/www/lux-marketing/routes.py", line 82, in lux_generate_campaign
Oct 21 06:57:41 lux gunicorn[2219]:     logger.error(f"Error in LUX campaign generation: {e}")
Oct 21 06:57:41 lux gunicorn[2219]:     ^^^^^^
Oct 21 06:57:41 lux gunicorn[2219]: NameError: name 'logger' is not defined
[2025-10-21 06:44:33 +0000] [2116] [INFO] Booting worker with pid: 2116
[2025-10-21 06:44:33 +0000] [2117] [INFO] Booting worker with pid: 2117
[2025-10-21 06:44:33 +0000] [2118] [INFO] Booting worker with pid: 2118
[2025-10-21 06:44:33 +0000] [2119] [INFO] Booting worker with pid: 2119
[2025-10-21 06:49:15 +0000] [2111] [INFO] Handling signal: term
[2025-10-21 06:49:15 +0000] [2117] [INFO] Worker exiting (pid: 2117)
[2025-10-21 06:49:15 +0000] [2116] [INFO] Worker exiting (pid: 2116)
[2025-10-21 06:49:15 +0000] [2119] [INFO] Worker exiting (pid: 2119)
[2025-10-21 06:49:15 +0000] [2118] [INFO] Worker exiting (pid: 2118)
[2025-10-21 06:49:16 +0000] [2111] [INFO] Shutting down: Master
[2025-10-21 06:49:17 +0000] [2161] [INFO] Starting gunicorn 23.0.0
[2025-10-21 06:49:17 +0000] [2161] [INFO] Listening at: http://0.0.0.0:5000 (2161)
[2025-10-21 06:49:17 +0000] [2161] [INFO] Using worker: sync
[2025-10-21 06:49:17 +0000] [2169] [INFO] Booting worker with pid: 2169
[2025-10-21 06:49:17 +0000] [2170] [INFO] Booting worker with pid: 2170
[2025-10-21 06:49:17 +0000] [2171] [INFO] Booting worker with pid: 2171
[2025-10-21 06:49:17 +0000] [2172] [INFO] Booting worker with pid: 2172
[2025-10-21 06:50:05 +0000] [2161] [INFO] Handling signal: term
[2025-10-21 06:50:05 +0000] [2169] [INFO] Worker exiting (pid: 2169)
[2025-10-21 06:50:05 +0000] [2170] [INFO] Worker exiting (pid: 2170)
[2025-10-21 06:50:05 +0000] [2171] [INFO] Worker exiting (pid: 2171)
[2025-10-21 06:50:05 +0000] [2172] [INFO] Worker exiting (pid: 2172)
[2025-10-21 06:50:06 +0000] [2161] [INFO] Shutting down: Master
[2025-10-21 06:54:11 +0000] [2213] [INFO] Starting gunicorn 23.0.0
[2025-10-21 06:54:11 +0000] [2213] [INFO] Listening at: http://0.0.0.0:5000 (2213)
[2025-10-21 06:54:11 +0000] [2213] [INFO] Using worker: sync
[2025-10-21 06:54:11 +0000] [2218] [INFO] Booting worker with pid: 2218
[2025-10-21 06:54:11 +0000] [2219] [INFO] Booting worker with pid: 2219
[2025-10-21 06:54:11 +0000] [2220] [INFO] Booting worker with pid: 2220
[2025-10-21 06:54:11 +0000] [2221] [INFO] Booting worker with pid: 2221