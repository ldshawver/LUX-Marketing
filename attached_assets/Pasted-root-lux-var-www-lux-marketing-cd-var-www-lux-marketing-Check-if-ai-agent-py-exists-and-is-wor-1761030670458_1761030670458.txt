root@lux:/var/www/lux-marketing# cd /var/www/lux-marketing

# Check if ai_agent.py exists and is working
python3 -c "from ai_agent import lux_agent; print('✓ AI agent import works')" 2>&1

# Check if OpenAI API key is set
echo "OPENAI_API_KEY status:"
grep OPENAI_API_KEY /etc/lux/lux-marketing.env | cut -d'=' -f1

# Check the recent error logs
journalctl -u lux-marketing.service -n 50 --no-pager | tail -30
✓ AI agent import works
OPENAI_API_KEY status:
OPENAI_API_KEY
Oct 21 07:07:17 lux systemd[1]: lux-marketing.service: Failed with result 'exit-code'.
Oct 21 07:07:27 lux systemd[1]: lux-marketing.service: Scheduled restart job, restart counter is at 8.
Oct 21 07:07:27 lux systemd[1]: Stopped lux-marketing.service - LUX Marketing Automation Platform.
Oct 21 07:07:27 lux systemd[1]: Started lux-marketing.service - LUX Marketing Automation Platform.
Oct 21 07:07:28 lux gunicorn[946]: INFO:ai_agent:LUX AI Agent initialized successfully
Oct 21 07:07:29 lux gunicorn[946]: DEBUG:tzlocal:/etc/timezone found, contents:
Oct 21 07:07:29 lux gunicorn[946]:  Etc/UTC
Oct 21 07:07:29 lux gunicorn[946]: DEBUG:tzlocal:/etc/localtime found
Oct 21 07:07:29 lux gunicorn[946]: DEBUG:tzlocal:2 found:
Oct 21 07:07:29 lux gunicorn[946]:  {'/etc/timezone': 'Etc/UTC', '/etc/localtime is a symlink to': 'Etc/UTC'}
Oct 21 07:07:29 lux gunicorn[946]: INFO:apscheduler.scheduler:Scheduler started
Oct 21 07:07:29 lux gunicorn[946]: DEBUG:apscheduler.scheduler:Looking for jobs to run
Oct 21 07:07:29 lux gunicorn[946]: INFO:scheduler:Email scheduler initialized
Oct 21 07:07:29 lux gunicorn[946]: DEBUG:apscheduler.scheduler:No jobs; waiting until a job is added
Oct 21 07:08:28 lux systemd[1]: Stopping lux-marketing.service - LUX Marketing Automation Platform...
Oct 21 07:08:29 lux systemd[1]: lux-marketing.service: Deactivated successfully.
Oct 21 07:08:29 lux systemd[1]: Stopped lux-marketing.service - LUX Marketing Automation Platform.
Oct 21 07:08:29 lux systemd[1]: lux-marketing.service: Consumed 3.045s CPU time.
Oct 21 07:08:29 lux systemd[1]: Started lux-marketing.service - LUX Marketing Automation Platform.
Oct 21 07:08:29 lux gunicorn[987]: INFO:ai_agent:LUX AI Agent initialized successfully
Oct 21 07:08:29 lux gunicorn[987]: DEBUG:tzlocal:/etc/timezone found, contents:
Oct 21 07:08:29 lux gunicorn[987]:  Etc/UTC
Oct 21 07:08:29 lux gunicorn[987]: DEBUG:tzlocal:/etc/localtime found
Oct 21 07:08:29 lux gunicorn[987]: DEBUG:tzlocal:2 found:
Oct 21 07:08:29 lux gunicorn[987]:  {'/etc/timezone': 'Etc/UTC', '/etc/localtime is a symlink to': 'Etc/UTC'}
Oct 21 07:08:29 lux gunicorn[987]: INFO:apscheduler.scheduler:Scheduler started
Oct 21 07:08:29 lux gunicorn[987]: DEBUG:apscheduler.scheduler:Looking for jobs to run
Oct 21 07:08:29 lux gunicorn[987]: INFO:scheduler:Email scheduler initialized
Oct 21 07:08:29 lux gunicorn[987]: DEBUG:apscheduler.scheduler:No jobs; waiting until a job is added
Oct 21 07:09:36 lux gunicorn[993]: ERROR:routes:Error in LUX campaign generation: 'LUXAgent' object has no attribute 'generate_campaign_content'